<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEOåŸºç¡€æ ‡ç­¾ -->
    <title>æˆ‘çš„å¹´åº¦è§‚å½±æ¸…å• - åœ¨çº¿ç”µå½±è®°å½•å·¥å…· | ç”Ÿæˆä¸ªäººè§‚å½±æ€»ç»“å›¾ç‰‡</title>
    <meta name="description" content="å…è´¹åœ¨çº¿ç”µå½±è§‚å½±æ¸…å•å·¥å…·ï¼Œè®°å½•ä½ çš„å¹´åº¦è§‚å½±å†ç¨‹ã€‚åŒ…å«2016-2025å¹´çƒ­é—¨ç”µå½±æ•°æ®åº“ï¼Œä¸€é”®ç”Ÿæˆç²¾ç¾çš„ä¸ªäººè§‚å½±æ€»ç»“å›¾ç‰‡ï¼Œæ”¯æŒåˆ†äº«åˆ°ç¤¾äº¤åª’ä½“ã€‚">
    <meta name="keywords" content="è§‚å½±æ¸…å•,ç”µå½±è®°å½•,å¹´åº¦æ€»ç»“,ç”µå½±æ¨è,è§‚å½±ç»Ÿè®¡,ç”µå½±æ•°æ®åº“,ä¸ªäººè§‚å½±,ç”µå½±åˆ†äº«,è§‚å½±å›¾ç‰‡ç”Ÿæˆ">
    <meta name="author" content="è§‚å½±æ¸…å•">
    <meta name="robots" content="index, follow">
    <meta name="language" content="zh-CN">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://movie.jkai.de/">
    <meta property="og:title" content="æˆ‘çš„å¹´åº¦è§‚å½±æ¸…å• - åœ¨çº¿ç”µå½±è®°å½•å·¥å…·">
    <meta property="og:description" content="å…è´¹åœ¨çº¿ç”µå½±è§‚å½±æ¸…å•å·¥å…·ï¼Œè®°å½•ä½ çš„å¹´åº¦è§‚å½±å†ç¨‹ï¼Œä¸€é”®ç”Ÿæˆç²¾ç¾çš„ä¸ªäººè§‚å½±æ€»ç»“å›¾ç‰‡ã€‚">
    <meta property="og:image" content="https://movie.jkai.de/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="æˆ‘çš„å¹´åº¦è§‚å½±æ¸…å•">
    <meta property="og:locale" content="zh_CN">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://movie.jkai.de/">
    <meta property="twitter:title" content="æˆ‘çš„å¹´åº¦è§‚å½±æ¸…å• - åœ¨çº¿ç”µå½±è®°å½•å·¥å…·">
    <meta property="twitter:description" content="å…è´¹åœ¨çº¿ç”µå½±è§‚å½±æ¸…å•å·¥å…·ï¼Œè®°å½•ä½ çš„å¹´åº¦è§‚å½±å†ç¨‹ï¼Œä¸€é”®ç”Ÿæˆç²¾ç¾çš„ä¸ªäººè§‚å½±æ€»ç»“å›¾ç‰‡ã€‚">
    <meta property="twitter:image" content="https://movie.jkai.de/og-image.jpg">
    
    <!-- ç§»åŠ¨ç«¯ä¼˜åŒ– -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="è§‚å½±æ¸…å•">
    <meta name="theme-color" content="#E50914">
    <meta name="msapplication-TileColor" content="#E50914">
    
    <!-- å›¾æ ‡ -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    
    <!-- é¢„è¿æ¥å’Œé¢„åŠ è½½ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://code.jquery.com">
    <link rel="preconnect" href="https://html2canvas.hertzen.com">
    
    <!-- DNSé¢„è§£æ -->
    <link rel="dns-prefetch" href="//api.sampleapis.com">
    <link rel="dns-prefetch" href="//www.omdbapi.com">
    
    <!-- å­—ä½“åŠ è½½ä¼˜åŒ– -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;700&display=swap" rel="stylesheet">
    
    <!-- ç»“æ„åŒ–æ•°æ® -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "æˆ‘çš„å¹´åº¦è§‚å½±æ¸…å•",
        "description": "å…è´¹åœ¨çº¿ç”µå½±è§‚å½±æ¸…å•å·¥å…·ï¼Œè®°å½•ä½ çš„å¹´åº¦è§‚å½±å†ç¨‹ï¼Œä¸€é”®ç”Ÿæˆç²¾ç¾çš„ä¸ªäººè§‚å½±æ€»ç»“å›¾ç‰‡ã€‚",
        "url": "https://movie.jkai.de/",
        "applicationCategory": "Entertainment",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "CNY"
        },
        "author": {
            "@type": "Organization",
            "name": "è§‚å½±æ¸…å•"
        },
        "datePublished": "2025-01-01",
        "dateModified": "2025-07-04",
        "inLanguage": "zh-CN",
        "isAccessibleForFree": true,
        "keywords": "è§‚å½±æ¸…å•,ç”µå½±è®°å½•,å¹´åº¦æ€»ç»“,ç”µå½±æ¨è",
        "screenshot": "https://movie.jkai.de/screenshot.jpg"
    }
    </script>
    
    <!-- åŠ è½½å¤–éƒ¨è„šæœ¬ -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        /* --- å…¨å±€æ ·å¼ --- */
        :root {
            --bg-color: #141414;
            --card-bg: #242424;
            --text-color: #e5e5e5;
            --primary-color: #E50914;
            --border-color: #303030;
            --selected-color: #4CAF50;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- å¤´éƒ¨ --- */
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 2.5rem;
            color: var(--primary-color);
            font-weight: 700;
            margin: 0;
        }
        .header p {
            font-size: 1rem;
            color: #aaa;
        }

        /* --- ç”µå½±åˆ—è¡¨ --- */
        .movie-table {
            width: 100%;
            max-width: 1200px;
            border-collapse: collapse;
        }
        .year-row {
            display: flex;
            margin-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }
        .year-label {
            flex: 0 0 80px;
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .movies-grid {
            flex-grow: 1;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 8px;
        }
        .movie-item {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 40px;
        }
        .movie-item:hover {
            background-color: #333;
            transform: translateY(-2px);
        }
        .movie-item.selected {
            background-color: var(--selected-color);
            color: white;
            font-weight: bold;
            border-color: var(--selected-color);
        }

        /* --- ç”ŸæˆæŒ‰é’® --- */
        .generate-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 30px;
            transition: background-color 0.2s;
        }
        .generate-button:hover {
            background-color: #f6121d;
        }

        /* --- ç”Ÿæˆå›¾ç‰‡çš„æ¨¡æ¿ (éšè—) --- */
        #image-template {
            display: none; /* é»˜è®¤éšè—ï¼Œç”Ÿæˆæ—¶æ‰æ˜¾ç¤º */
            position: absolute;
            left: -9999px; /* ç§»å‡ºå±å¹•å¤– */
            width: 800px;
            background-color: #1d1d1d;
            padding: 40px;
            border: 10px solid var(--primary-color);
            box-sizing: border-box;
        }
        #image-template .template-header {
            text-align: center;
            margin-bottom: 30px;
        }
        #image-template .template-header h2 {
            font-size: 2.5rem;
            color: white;
            margin: 0;
        }
        #image-template .template-header p {
            font-size: 1.2rem;
            color: #ccc;
        }
        #image-template .template-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }
        #image-template .template-item {
            background-color: var(--card-bg);
            color: var(--text-color);
            padding: 12px;
            border-radius: 5px;
            text-align: center;
            font-size: 1rem;
        }
        #image-template .template-footer {
            margin-top: 30px;
            text-align: right;
            font-size: 0.9rem;
            color: #777;
        }

        /* --- å›¾ç‰‡é¢„è§ˆå¼¹çª— --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .modal-content h3 {
            margin-top: 0;
        }
        #preview-image {
            max-width: 90vw;
            max-height: 70vh;
            border: 2px solid var(--border-color);
        }
        .modal-actions {
            margin-top: 20px;
        }
        .download-btn, .close-btn {
            background-color: var(--selected-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 10px;
            font-size: 1rem;
        }
        .close-btn {
            background-color: #666;
        }
        
        /* --- SEOå’Œå¯è®¿é—®æ€§ä¼˜åŒ– --- */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        .subtitle {
            font-size: 1rem;
            color: #aaa;
            margin: 10px 0;
        }
        
        .status-info {
            font-size: 0.9rem;
            color: #888;
            margin-top: 10px;
        }
        
        .footer-note {
            font-size: 0.8rem;
            color: #777;
            margin-top: 5px;
        }
        
        .action-section {
            text-align: center;
            margin-top: 30px;
        }
        
        /* --- é¡µè„šæ ·å¼ --- */
        .footer {
            margin-top: 50px;
            padding: 20px;
            text-align: center;
            border-top: 1px solid var(--border-color);
            color: #666;
            font-size: 0.9rem;
        }
        
        .footer a {
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        /* --- å“åº”å¼ä¼˜åŒ– --- */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .movies-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
                gap: 6px;
            }
            
            .movie-item {
                font-size: 0.8rem;
                padding: 8px;
                min-height: 35px;
            }
            
            .year-label {
                flex: 0 0 60px;
                font-size: 1.5rem;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .movies-grid {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
                gap: 4px;
            }
            
            .movie-item {
                font-size: 0.7rem;
                padding: 6px;
                min-height: 30px;
            }
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>æˆ‘çš„å¹´åº¦è§‚å½±æ¸…å•</h1>
        <p>ç‚¹å‡»é€‰æ‹©ä½ çœ‹è¿‡çš„ç”µå½±ï¼Œç„¶åç”Ÿæˆä½ çš„å¹´åº¦æ€»ç»“å›¾ç‰‡ï¼</p>
        <p id="data-status" style="font-size: 0.9rem; color: #888; margin-top: 10px;">
            ğŸ“¡ æ­£åœ¨åŠ è½½ç”µå½±æ•°æ®åº“...
        </p>
    </div>

    <div id="movie-list-container" class="movie-table">
        <!-- ç”µå½±åˆ—è¡¨å°†ç”±JSåŠ¨æ€ç”Ÿæˆåœ¨è¿™é‡Œ -->
    </div>

    <button id="generate-btn" class="generate-button">ç”Ÿæˆæˆ‘çš„è§‚å½±å›¾ç‰‡</button>

    <!-- ç”¨äºç”Ÿæˆå›¾ç‰‡çš„éšè—æ¨¡æ¿ -->
    <div id="image-template">
        <div class="template-header">
            <h2 id="template-title">æˆ‘çš„2023å¹´è§‚å½±æ€»ç»“</h2>
            <p id="template-count">å…±è§‚çœ‹äº† 0 éƒ¨ç”µå½±</p>
        </div>
        <div id="template-grid" class="template-grid">
            <!-- é€‰ä¸­çš„ç”µå½±å°†åœ¨è¿™é‡Œç”Ÿæˆ -->
        </div>
        <div class="template-footer">
            <p>ç”±ã€Œæˆ‘çš„å¹´åº¦è§‚å½±æ¸…å•ã€ç”Ÿæˆ</p>
        </div>
    </div>
    
    <!-- å›¾ç‰‡é¢„è§ˆå¼¹çª— -->
    <div id="preview-modal" class="modal">
        <div class="modal-content">
            <h3>å›¾ç‰‡å·²ç”Ÿæˆï¼</h3>
            <img id="preview-image" src="" alt="ç”Ÿæˆçš„å›¾ç‰‡">
            <div class="modal-actions">
                <a id="download-link" class="download-btn" href="#" download="my-movie-list-2023.png">ä¸‹è½½å›¾ç‰‡</a>
                <button id="close-modal-btn" class="close-btn">å…³é—­</button>
            </div>
        </div>
    </div>

    <!-- é¡µè„šä¿¡æ¯ -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 æˆ‘çš„å¹´åº¦è§‚å½±æ¸…å• | å…è´¹åœ¨çº¿ç”µå½±è®°å½•å·¥å…·</p>
            <p class="tech-info">
                æ”¯æŒ2016-<span id="current-year-footer">2025</span>å¹´ç”µå½±æ•°æ® |
                å·²æ”¶å½•<span id="total-movies-footer">120+</span>éƒ¨ç²¾é€‰ç”µå½±
            </p>
            <p class="footer-note">
                æœ¬å·¥å…·å®Œå…¨åœ¨æµè§ˆå™¨æœ¬åœ°è¿è¡Œï¼Œä¸æ”¶é›†ä»»ä½•ä¸ªäººä¿¡æ¯
            </p>
        </div>
    </footer>

    <script>
        // æ›´æ–°é¡µè„šå¹´ä»½
        document.getElementById('current-year-footer').textContent = new Date().getFullYear();
    </script>

    <script>
        $(document).ready(function(){
            // --- åŠ¨æ€ç”Ÿæˆå¹´ä»½å’Œç”µå½±æ•°æ® ---
            const currentYear = new Date().getFullYear();
            const startYear = 2016; // èµ·å§‹å¹´ä»½
            
            // åˆå§‹åŒ–ç”µå½±æ•°æ®å¯¹è±¡
            let movieData = {};
            
            // ä¸ºæ¯ä¸ªå¹´ä»½ç”Ÿæˆé»˜è®¤æ•°æ®
            for (let year = startYear; year <= currentYear; year++) {
                movieData[year.toString()] = [];
            }
            
            // è®¾ç½®åŸºç¡€ç”µå½±æ•°æ®
            const baseMovieData = {
                "2024": ["æ²™ä¸˜2", "ç–¯ç‹‚çš„éº¦å…‹æ–¯ï¼šç‹‚æš´å¥³ç¥", "å¤´è„‘ç‰¹å·¥é˜Ÿ2", "å“¥æ–¯æ‹‰å¤§æˆ˜é‡‘åˆš2", "ä¹é¾™åŸå¯¨ä¹‹å›´åŸ", "å¹´ä¼šä¸èƒ½åœï¼", "çƒ­è¾£æ»šçƒ«", "é£é©°äººç”Ÿ2"],
                "2023": ["å¥¥æœ¬æµ·é»˜", "èŠ­æ¯”", "èœ˜è››ä¾ ï¼šçºµæ¨ªå®‡å®™", "æµæµªåœ°çƒ2", "æ»¡æ±Ÿçº¢", "å°ç¥ç¬¬ä¸€éƒ¨", "é•¿å®‰ä¸‰ä¸‡é‡Œ", "æ˜Ÿæ„¿"],
                "2022": ["ç¬æ¯å…¨å®‡å®™", "é˜¿å‡¡è¾¾ï¼šæ°´ä¹‹é“", "æ–°è™è ä¾ ", "å£®å¿—å‡Œäº‘2ï¼šç‹¬è¡Œä¾ ", "å­å¼¹åˆ—è½¦", "ç‹¬è¡Œæœˆçƒ", "äººç”Ÿå¤§äº‹", "è¥¿çº¿æ— æˆ˜äº‹"],
                "2021": ["æ²™ä¸˜", "èœ˜è››ä¾ ï¼šè‹±é›„æ— å½’", "007ï¼šæ— æš‡èµ´æ­»", "ä½ å¥½ï¼Œæç„•è‹±", "é•¿æ´¥æ¹–", "å¤±æ§ç©å®¶", "é€ä½ ä¸€æœµå°çº¢èŠ±"],
                "2020": ["ä¿¡æ¡", "å¿ƒçµå¥‡æ—…", "å…«ä½°", "ç¥å¥‡å¥³ä¾ 1984", "å§œå­ç‰™", "æˆ‘å’Œæˆ‘çš„å®¶ä¹¡", "æ‹†å¼¹ä¸“å®¶2", "ä¸€ç§’é’Ÿ"],
            };
            
            // å¦‚æœæ˜¯å½“å‰å¹´ä»½ï¼Œæ·»åŠ ä¸€äº›é¢„æœŸçš„ç”µå½±
            if (currentYear === 2025) {
                baseMovieData["2025"] = ["è¶…äººï¼šä¼ æ‰¿", "ç¥å¥‡å››ä¾ ï¼šåˆæ¬¡æ­¥éª¤", "é›·ç¥5", "èœ˜è››ä¾ 4", "é˜¿å‡¡è¾¾3ï¼šç§å­çš„æ‰¿è½½è€…", "é€Ÿåº¦ä¸æ¿€æƒ…11"];
            }
            
            // åˆå¹¶åŸºç¡€æ•°æ®
            movieData = { ...movieData, ...baseMovieData };

            // --- å…è´¹ç”µå½±æ•°æ®API (æ— éœ€å¯†é’¥) ---
            
            // æ–¹æ¡ˆ1: ä½¿ç”¨OMDb APIçš„å…è´¹ç‰ˆæœ¬ (æ¯æ—¥1000æ¬¡è¯·æ±‚)
            async function fetchFromOMDbFree() {
                try {
                    // ä½¿ç”¨ä¸€äº›çŸ¥åç”µå½±çš„IMDb IDè·å–æ•°æ®
                    const movieIds = ['tt0111161', 'tt0068646', 'tt0071562', 'tt0468569', 'tt0050083'];
                    const movies = [];
                    
                    for (const id of movieIds.slice(0, 3)) { // é™åˆ¶è¯·æ±‚æ•°é‡
                        try {
                            const response = await fetch(`https://www.omdbapi.com/?i=${id}&apikey=trilogy`);
                            const data = await response.json();
                            if (data.Response === 'True') {
                                movies.push(data.Title);
                            }
                        } catch (error) {
                            console.log(`è·å–ç”µå½± ${id} å¤±è´¥:`, error);
                        }
                    }
                    
                    return movies.length > 0 ? movies : null;
                } catch (error) {
                    console.log('OMDb APIä¸å¯ç”¨:', error);
                    return null;
                }
            }
            
            // æ–¹æ¡ˆ2: ä½¿ç”¨å†…ç½®çš„ä¸°å¯Œç”µå½±æ•°æ®åº“ (åŠ¨æ€ç”Ÿæˆåˆ°å½“å‰å¹´ä»½)
            function getEnhancedMovieDatabase() {
                const enhancedData = {
                    "2024": [
                        "æ²™ä¸˜2", "ç–¯ç‹‚çš„éº¦å…‹æ–¯ï¼šç‹‚æš´å¥³ç¥", "å¤´è„‘ç‰¹å·¥é˜Ÿ2", "å“¥æ–¯æ‹‰å¤§æˆ˜é‡‘åˆš2",
                        "ä¹é¾™åŸå¯¨ä¹‹å›´åŸ", "å¹´ä¼šä¸èƒ½åœï¼", "çƒ­è¾£æ»šçƒ«", "é£é©°äººç”Ÿ2",
                        "ç¬¬äºŒåæ¡", "æˆ‘ä»¬ä¸€èµ·æ‘‡å¤ªé˜³", "ç»´å’Œé˜²æš´é˜Ÿ", "è‰æœ¨äººé—´", "å‘¨å¤„é™¤ä¸‰å®³", "åŠŸå¤«ç†ŠçŒ«4"
                    ],
                    "2023": [
                        "å¥¥æœ¬æµ·é»˜", "èŠ­æ¯”", "èœ˜è››ä¾ ï¼šçºµæ¨ªå®‡å®™", "æµæµªåœ°çƒ2",
                        "æ»¡æ±Ÿçº¢", "å°ç¥ç¬¬ä¸€éƒ¨", "é•¿å®‰ä¸‰ä¸‡é‡Œ", "æ˜Ÿæ„¿",
                        "æ·±æµ·", "ä¸­å›½ä¹’ä¹“ä¹‹ç»åœ°åå‡»", "æ— å", "ç‹‚é£™", "æ¶ˆå¤±çš„å¥¹", "å­¤æ³¨ä¸€æ·"
                    ],
                    "2022": [
                        "ç¬æ¯å…¨å®‡å®™", "é˜¿å‡¡è¾¾ï¼šæ°´ä¹‹é“", "æ–°è™è ä¾ ", "å£®å¿—å‡Œäº‘2ï¼šç‹¬è¡Œä¾ ",
                        "å­å¼¹åˆ—è½¦", "ç‹¬è¡Œæœˆçƒ", "äººç”Ÿå¤§äº‹", "è¥¿çº¿æ— æˆ˜äº‹",
                        "ç¥å¥‡åŠ¨ç‰©ï¼šé‚“å¸ƒåˆ©å¤šä¹‹è°œ", "é›·ç¥4ï¼šçˆ±ä¸é›·ç”µ", "é»‘è±¹2", "å°é»„äººå¤§çœ¼èŒï¼šç¥å·å¥¶çˆ¸å‰ä¼ "
                    ],
                    "2021": [
                        "æ²™ä¸˜", "èœ˜è››ä¾ ï¼šè‹±é›„æ— å½’", "007ï¼šæ— æš‡èµ´æ­»", "ä½ å¥½ï¼Œæç„•è‹±",
                        "é•¿æ´¥æ¹–", "å¤±æ§ç©å®¶", "é€ä½ ä¸€æœµå°çº¢èŠ±", "æˆ‘çš„å§å§",
                        "é€Ÿåº¦ä¸æ¿€æƒ…9", "é»‘å¯¡å¦‡", "æ°¸æ’æ—", "å°šæ°”ä¸åç¯ä¼ å¥‡", "æ‰¬åç«‹ä¸‡", "çˆ±æƒ…ç¥è¯"
                    ],
                    "2020": [
                        "ä¿¡æ¡", "å¿ƒçµå¥‡æ—…", "å…«ä½°", "ç¥å¥‡å¥³ä¾ 1984",
                        "å§œå­ç‰™", "æˆ‘å’Œæˆ‘çš„å®¶ä¹¡", "æ‹†å¼¹ä¸“å®¶2", "ä¸€ç§’é’Ÿ",
                        "èŠ±æœ¨å…°", "é»‘å¯¡å¦‡", "é€Ÿåº¦ä¸æ¿€æƒ…ï¼šç‰¹åˆ«è¡ŒåŠ¨", "1917", "å°å¦‡äºº", "å¯„ç”Ÿè™«"
                    ],
                    "2019": [
                        "å¤ä»‡è€…è”ç›Ÿ4ï¼šç»ˆå±€ä¹‹æˆ˜", "ç‹®å­ç‹", "å†°é›ªå¥‡ç¼˜2", "èœ˜è››ä¾ ï¼šè‹±é›„è¿œå¾",
                        "å“ªå’ä¹‹é­”ç«¥é™ä¸–", "æµæµªåœ°çƒ", "æˆ‘å’Œæˆ‘çš„ç¥–å›½", "ä¸­å›½æœºé•¿",
                        "å°ä¸‘", "1917", "å¯„ç”Ÿè™«", "å¥½è±åå¾€äº‹", "å°‘å¹´çš„ä½ ", "ç™½è›‡ï¼šç¼˜èµ·"
                    ],
                    "2018": [
                        "é»‘è±¹", "å¤ä»‡è€…è”ç›Ÿ3ï¼šæ— é™æˆ˜äº‰", "è¶…äººæ€»åŠ¨å‘˜2", "ä¾ç½—çºªä¸–ç•Œ2",
                        "æˆ‘ä¸æ˜¯è¯ç¥", "è¥¿è™¹å¸‚é¦–å¯Œ", "çº¢æµ·è¡ŒåŠ¨", "å”äººè¡—æ¢æ¡ˆ2",
                        "æ¯’æ¶²", "æµ·ç‹", "ç¥å¥‡åŠ¨ç‰©ï¼šæ ¼æ—å¾·æ²ƒä¹‹ç½ª", "èšäºº2ï¼šé»„èœ‚å¥³ç°èº«", "ä¸€å‡ºå¥½æˆ", "é‚ªä¸å‹æ­£"
                    ],
                    "2017": [
                        "æ˜Ÿçƒå¤§æˆ˜8ï¼šæœ€åçš„ç»åœ°æ­¦å£«", "ç¾å¥³ä¸é‡å…½", "é€Ÿåº¦ä¸æ¿€æƒ…8", "èœ˜è››ä¾ ï¼šè‹±é›„å½’æ¥",
                        "æˆ˜ç‹¼2", "ç¾ç¾çš„é“æ‹³", "èŠ³å", "å‰ä»»3ï¼šå†è§å‰ä»»",
                        "ç¥å¥‡å¥³ä¾ ", "é“¶æ²³æŠ¤å«é˜Ÿ2", "é›·ç¥3ï¼šè¯¸ç¥é»„æ˜", "æ­£ä¹‰è”ç›Ÿ", "å¯»æ¢¦ç¯æ¸¸è®°", "æ•¦åˆ»å°”å…‹"
                    ],
                    "2016": [
                        "ç¾å›½é˜Ÿé•¿3ï¼šå†…æˆ˜", "æµ·åº•æ€»åŠ¨å‘˜2", "æ˜Ÿçƒå¤§æˆ˜å¤–ä¼ ï¼šä¾ ç›—ä¸€å·", "å¥‡å¼‚åšå£«",
                        "ç¾äººé±¼", "æ¹„å…¬æ²³è¡ŒåŠ¨", "æˆ‘ä¸æ˜¯æ½˜é‡‘è²", "å¤§é±¼æµ·æ£ ",
                        "ç–¯ç‹‚åŠ¨ç‰©åŸ", "æ­»ä¾", "Xæˆ˜è­¦ï¼šå¤©å¯", "è‡ªæ€å°é˜Ÿ", "çˆ±ä¹ä¹‹åŸ", "è¡€æˆ˜é’¢é”¯å²­"
                    ]
                };
                
                // å¦‚æœå½“å‰å¹´ä»½æ˜¯2025å¹´ï¼Œæ·»åŠ 2025å¹´çš„ç”µå½±
                if (currentYear === 2025) {
                    enhancedData["2025"] = [
                        "è¶…äººï¼šä¼ æ‰¿", "ç¥å¥‡å››ä¾ ï¼šåˆæ¬¡æ­¥éª¤", "é›·ç¥5", "èœ˜è››ä¾ 4",
                        "é˜¿å‡¡è¾¾3ï¼šç§å­çš„æ‰¿è½½è€…", "é€Ÿåº¦ä¸æ¿€æƒ…11", "ç¢Ÿä¸­è°8", "ä¾ç½—çºªä¸–ç•Œ4",
                        "é»‘è±¹3", "å¥‡å¼‚åšå£«3", "é“¶æ²³æŠ¤å«é˜Ÿ4", "å¤ä»‡è€…è”ç›Ÿ5", "Xæˆ˜è­¦é‡å¯", "æ­»ä¾3"
                    ];
                }
                
                // å¦‚æœå½“å‰å¹´ä»½è¶…è¿‡2025å¹´ï¼Œä¸ºæœªæ¥å¹´ä»½ç”Ÿæˆå ä½ç”µå½±
                if (currentYear > 2025) {
                    for (let year = 2025; year <= currentYear; year++) {
                        if (!enhancedData[year.toString()]) {
                            enhancedData[year.toString()] = [
                                `${year}å¹´çƒ­é—¨ç”µå½±1`, `${year}å¹´çƒ­é—¨ç”µå½±2`, `${year}å¹´çƒ­é—¨ç”µå½±3`,
                                `${year}å¹´çƒ­é—¨ç”µå½±4`, `${year}å¹´çƒ­é—¨ç”µå½±5`, `${year}å¹´çƒ­é—¨ç”µå½±6`,
                                `${year}å¹´çƒ­é—¨ç”µå½±7`, `${year}å¹´çƒ­é—¨ç”µå½±8`, `${year}å¹´çƒ­é—¨ç”µå½±9`,
                                `${year}å¹´çƒ­é—¨ç”µå½±10`, `${year}å¹´çƒ­é—¨ç”µå½±11`, `${year}å¹´çƒ­é—¨ç”µå½±12`
                            ];
                        }
                    }
                }
                
                return enhancedData;
            }
            
            // æ–¹æ¡ˆ3: ä»å…¬å¼€çš„ç”µå½±æ•°æ®æºè·å– (å¯é€‰å¢å¼º)
            async function fetchFromPublicAPI() {
                try {
                    // å°è¯•è·å–ä¸€äº›é¢å¤–çš„ç”µå½±æ•°æ®ä½œä¸ºè¡¥å……
                    const response = await fetch('https://api.sampleapis.com/movies/drama');
                    const data = await response.json();
                    
                    if (data && Array.isArray(data)) {
                        // å°†è·å–çš„ç”µå½±æŒ‰å¹´ä»½åˆ†ç±»
                        const moviesByYear = {};
                        data.slice(0, 20).forEach(movie => {
                            if (movie.year && movie.title) {
                                const year = movie.year.toString();
                                if (year >= startYear.toString() && year <= currentYear.toString()) {
                                    if (!moviesByYear[year]) {
                                        moviesByYear[year] = [];
                                    }
                                    if (moviesByYear[year].length < 3) { // æ¯å¹´æœ€å¤šæ·»åŠ 3éƒ¨
                                        moviesByYear[year].push(movie.title);
                                    }
                                }
                            }
                        });
                        return Object.keys(moviesByYear).length > 0 ? moviesByYear : null;
                    }
                    return null;
                } catch (error) {
                    console.log('å…¬å¼€APIä¸å¯ç”¨:', error);
                    return null;
                }
            }
            
            // æ™ºèƒ½æ•°æ®åŠ è½½ - å°è¯•å¤šä¸ªæ•°æ®æº
            async function loadEnhancedMovieData() {
                console.log(`ğŸ¬ æ­£åœ¨åŠ è½½å¢å¼ºç”µå½±æ•°æ® (${startYear}-${currentYear})...`);
                
                // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
                $('#data-status').text(`ğŸ“¡ æ­£åœ¨åŠ è½½ç”µå½±æ•°æ®åº“ (${startYear}-${currentYear})...`);
                
                // é¦–å…ˆä½¿ç”¨å†…ç½®çš„ä¸°å¯Œæ•°æ®åº“
                try {
                    const enhancedData = getEnhancedMovieDatabase();
                    // åˆå¹¶æ•°æ®ï¼Œä¿ç•™ç°æœ‰æ•°æ®å¹¶æ·»åŠ æ–°æ•°æ®
                    Object.keys(enhancedData).forEach(year => {
                        if (movieData[year]) {
                            // åˆå¹¶æ•°ç»„å¹¶å»é‡
                            const combined = [...movieData[year], ...enhancedData[year]];
                            movieData[year] = [...new Set(combined)];
                        } else {
                            movieData[year] = enhancedData[year];
                        }
                    });
                    console.log(`âœ… å·²åŠ è½½å¢å¼ºç”µå½±æ•°æ®åº“ (è¦†ç›–${Object.keys(enhancedData).length}ä¸ªå¹´ä»½)`);
                    
                    // è®¡ç®—æ€»ç”µå½±æ•°é‡
                    const totalMovies = Object.values(movieData).reduce((sum, movies) => sum + movies.length, 0);
                    $('#data-status').text(`âœ… å·²åŠ è½½ç”µå½±æ•°æ®åº“ (${startYear}-${currentYear}å¹´ï¼Œå…±${totalMovies}éƒ¨ç”µå½±)`);
                    
                    renderMovieList();
                } catch (error) {
                    console.log('âŒ å¢å¼ºæ•°æ®åŠ è½½å¤±è´¥:', error);
                    $('#data-status').text('âŒ æ•°æ®åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨åŸºç¡€æ•°æ®');
                }
                
                // å°è¯•ä»å…¬å¼€APIè·å–é¢å¤–æ•°æ®
                try {
                    const publicData = await fetchFromPublicAPI();
                    if (publicData) {
                        // åˆå¹¶APIæ•°æ®
                        Object.keys(publicData).forEach(year => {
                            if (movieData[year]) {
                                const combined = [...movieData[year], ...publicData[year]];
                                movieData[year] = [...new Set(combined)];
                            } else {
                                movieData[year] = publicData[year];
                            }
                        });
                        console.log('âœ… å·²ä»å…¬å¼€APIåŠ è½½é¢å¤–æ•°æ®');
                        
                        // é‡æ–°è®¡ç®—æ€»æ•°
                        const totalMovies = Object.values(movieData).reduce((sum, movies) => sum + movies.length, 0);
                        $('#data-status').text(`ğŸ¬ ç”µå½±æ•°æ®åº“å·²å¢å¼º (${startYear}-${currentYear}å¹´ï¼Œå…±${totalMovies}éƒ¨ç”µå½±)`);
                        
                        renderMovieList();
                    }
                } catch (error) {
                    console.log('âš ï¸ å…¬å¼€APIæ•°æ®åŠ è½½å¤±è´¥:', error);
                }
                
                console.log(`ğŸ­ ç”µå½±æ•°æ®åŠ è½½å®Œæˆï¼Œå½“å‰å¹´ä»½èŒƒå›´: ${startYear}-${currentYear}`);
            }

            // --- åŠ¨æ€ç”Ÿæˆç”µå½±åˆ—è¡¨ ---
            function renderMovieList() {
                const container = $('#movie-list-container');
                container.empty(); // æ¸…ç©ºç°æœ‰å†…å®¹
                
                // è·å–å¹´ä»½å¹¶æŒ‰ä»æ–°åˆ°æ—§æ’åº
                const years = Object.keys(movieData).sort((a, b) => parseInt(b) - parseInt(a));
                
                years.forEach(year => {
                    // åªæ˜¾ç¤ºæœ‰ç”µå½±çš„å¹´ä»½
                    if (movieData[year] && movieData[year].length > 0) {
                        let yearRow = $('<div class="year-row"></div>');
                        let yearLabel = $(`<div class="year-label">${year}</div>`);
                        let moviesGrid = $('<div class="movies-grid"></div>');

                        movieData[year].forEach(movie => {
                            let movieItem = $(`<div class="movie-item" data-year="${year}">${movie}</div>`);
                            moviesGrid.append(movieItem);
                        });

                        yearRow.append(yearLabel).append(moviesGrid);
                        container.append(yearRow);
                    }
                });
                
                // é‡æ–°ç»‘å®šç‚¹å‡»äº‹ä»¶
                $('.movie-item').off('click').on('click', function() {
                    $(this).toggleClass('selected');
                });
            }
            
            // åˆå§‹æ¸²æŸ“
            renderMovieList();
            
            // è‡ªåŠ¨åŠ è½½å¢å¼ºæ•°æ®
            loadEnhancedMovieData();

            // --- ç‚¹å‡»ç”Ÿæˆå›¾ç‰‡æŒ‰é’® ---
            $('#generate-btn').on('click', function() {
                const selectedMovies = [];
                $('.movie-item.selected').each(function() {
                    selectedMovies.push($(this).text());
                });

                if (selectedMovies.length === 0) {
                    alert('è¯·è‡³å°‘é€‰æ‹©ä¸€éƒ¨ç”µå½±ï¼');
                    return;
                }

                // å‡†å¤‡å›¾ç‰‡æ¨¡æ¿
                const templateGrid = $('#template-grid');
                templateGrid.empty(); // æ¸…ç©ºæ—§å†…å®¹

                selectedMovies.forEach(movie => {
                    templateGrid.append(`<div class="template-item">${movie}</div>`);
                });
                
                // æ›´æ–°æ ‡é¢˜å’Œæ•°é‡
                const currentYear = new Date().getFullYear(); // æˆ–è€…ä½ å¯ä»¥è®©ç”¨æˆ·é€‰æ‹©å¹´ä»½
                $('#template-title').text(`æˆ‘çš„${currentYear}è§‚å½±æ€»ç»“`);
                $('#template-count').text(`å…±è§‚çœ‹äº† ${selectedMovies.length} éƒ¨ä½³ç‰‡`);

                // ä½¿ç”¨html2canvasç”Ÿæˆå›¾ç‰‡
                const templateElement = document.getElementById('image-template');
                $(templateElement).css('display', 'block'); // ä¸´æ—¶æ˜¾ç¤ºä»¥ä¾¿æˆªå›¾

                html2canvas(templateElement, {
                    scale: 2, // æé«˜å›¾ç‰‡æ¸…æ™°åº¦
                    backgroundColor: null, // ä½¿ç”¨å…ƒç´ çš„èƒŒæ™¯è‰²
                    useCORS: true // å¦‚æœå›¾ç‰‡æ¥è‡ªå¤–éƒ¨ï¼Œéœ€è¦è¿™ä¸ª
                }).then(canvas => {
                    const imageUrl = canvas.toDataURL('image/png');
                    
                    // æ˜¾ç¤ºå¼¹çª—
                    $('#preview-image').attr('src', imageUrl);
                    $('#download-link').attr('href', imageUrl);
                    $('#download-link').attr('download', `my-movie-list-${currentYear}.png`);
                    $('#preview-modal').css('display', 'flex');

                    $(templateElement).css('display', 'none'); // æˆªå›¾åé‡æ–°éšè—
                });
            });
            
            // --- å…³é—­å¼¹çª— ---
            $('#close-modal-btn').on('click', function() {
                $('#preview-modal').css('display', 'none');
            });
        });
    </script>

</body>
</html>